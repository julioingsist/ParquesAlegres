(function(a){a.fn.columnFilter=function(d){var b,w,m,h;var y="From {from} to {to}";var c=new Array();var g=new Array();var x=null;var v=function(){};function z(A,D,G,J,H){if(typeof D=="undefined"){return new Array()}if(typeof G=="undefined"){G=true}if(typeof J=="undefined"){J=true}if(typeof H=="undefined"){H=true}var L;if(J==true){L=A.aiDisplay}else{L=A.aiDisplayMaster}var K=new Array();for(var C=0,F=L.length;C<F;C++){var E=L[C];var B=t.fnGetData(E);var I=B[D];if(H==true&&I.length==0){continue}else{if(G==true&&jQuery.inArray(I,K)>-1){continue}else{K.push(I)}}}return K.sort()}function u(i){if(l.bUseColVis){return i}else{return t.fnSettings().oApi._fnVisibleToColumnIndex(t.fnSettings(),i)}}function o(J,I,K,A,E,L,G){var B="text_filter";if(A){B="number_filter"}m=m.replace(/(^\s*)|(\s*$)/g,"");var C=J.fnSettings().aoPreSearchCols[w].sSearch;var i="search_init ";var D=m;if(C!=""&&C!="^"){if(A&&C.charAt(0)=="^"){D=C.substr(1)}else{D=C}i=""}var H=a('<input type="text" class="'+i+B+'" placeholder="'+D+'" />');if(L!=undefined&&L!=-1){H.attr("maxlength",L)}h.html(H);if(A){h.wrapInner('<span class="filter_column filter_number" />')}else{h.wrapInner('<span class="filter_column filter_text" />')}b[w]=m;var F=w;if(A&&!J.fnSettings().oFeatures.bServerSide){H.keyup(function(){J.fnFilter("^"+this.value,u(F),true,false);v()})}else{H.keyup(function(){if(J.fnSettings().oFeatures.bServerSide&&E!=0){var M=J.fnSettings().aoPreSearchCols[F].sSearch;var N=a(this).data("dt-iLastFilterLength");if(typeof N=="undefined"){N=0}var O=this.value.length;if(Math.abs(O-N)<E){return}else{a(this).data("dt-iLastFilterLength",O)}}J.fnFilter(this.value,u(F),I,K);v()})}H.focus(function(){if(a(this).hasClass("search_init")){a(this).removeClass("search_init");this.value=""}});H.blur(function(){if(this.value==""){a(this).addClass("search_init")}});if(G!=""){if(jQuery.isArray(G)){G=G[0]}jQuery(H).val(G);jQuery(H).keyup()}}function f(E,D){var A="",i="";if(D!=""){if(jQuery.isArray(D)){A=D[0];if(D[1]){i=D[1]}}else{A=D[0]}}h.html("");var H=E.attr("id")+"_range_from_"+w;var F=a('<input type="text" class="number_range_filter" id="'+H+'" rel="'+w+'" placeholder="From" />');h.append(F);var B=E.attr("id")+"_range_to_"+w;var G=a('<input type="text" class="number_range_filter" id="'+B+'" rel="'+w+'" placeholder="To" />');h.append(G);h.wrapInner('<span class="filter_column filter_number_range" />');var C=w;g.push(w);E.dataTableExt.afnFiltering.push(function(O,L,K){if(E.attr("id")!=O.sTableId){return true}var N=(typeof E.data("description").number_format!=="undefined")?parseInt(E.data("description").number_format):1;if(document.getElementById(H)==null){return true}var J=N==1?/\./g:/,/g;var M=document.getElementById(H).value.replace(J,"");var I=document.getElementById(B).value.replace(J,"");var P=L[u(C)]=="-"?0:L[u(C)].replace(J,"");if(N==1){M=M.replace(/,/g,".");I=I.replace(/,/g,".");P=P.replace(/,/g,".")}M=M*1;I=I*1;P=P*1;if(M==""&&I==""){return true}else{if(M==""&&P<=I){return true}else{if(M<=P&&""==I){return true}else{if(M<=P&&P<=I){return true}}}}return false});a("#"+H+",#"+B,h).keyup(function(){var J=document.getElementById(H).value*1;var I=document.getElementById(B).value*1;if(J!=0&&I!=0&&J>I){return}E.fnDraw();v()});if(A!=""){jQuery(F).val(A);jQuery(document).ready(function(){jQuery(F).keyup()})}if(i!=""){jQuery(G).val(i);jQuery(document).ready(function(){jQuery(G).keyup()})}}function q(F,E){var B="",A="";if(E!=""){if(jQuery.isArray(E)){B=E[0];if(E[1]){A=E[1]}}else{B=E[0]}}var J=y.split(/[}{]/);var i=F.data("description").datepickFormat.replace(/y/g,"yy");h.html("");var I=F.attr("id")+"_range_from_"+w;var H=a('<input type="text" class="date_range_filter" id="'+I+'" rel="'+w+'" placeholder="From" />');var C=F.attr("id")+"_range_to_"+w;var G=a('<input type="text" class="date_range_filter" id="'+C+'" rel="'+w+'" placeholder="To" />');for(ti=0;ti<J.length;ti++){if(J[ti]==l.sDateFromToken){h.append(H)}else{if(J[ti]==l.sDateToToken){h.append(G)}else{}}}h.wrapInner('<span class="filter_column filter_date_range" />');H.pickadate({format:i,formatSubmit:i,editable:true,selectYears:true,selectMonths:true});G.pickadate({format:i,formatSubmit:i,editable:true,selectYears:true,selectMonths:true});var D=w;g.push(w);F.dataTableExt.afnFiltering.push(function(Q,N,M){if(F.attr("id")!=Q.sTableId){return true}var L=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,H.val());var K=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,G.val());if(L==null&&K==null){return true}var P=null;try{if(N[u(D)]==null||N[u(D)]==""){return false}P=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,N[u(D)])}catch(O){return false}if(P==null){return false}if(L==null&&P<=K){return true}else{if(L<=P&&K==null){return true}else{if(L<=P&&P<=K){return true}}}return false});a("#"+I+",#"+C,h).change(function(){F.fnDraw();v()});if(B!=""){jQuery(H).val(B);jQuery(document).ready(function(){jQuery(H).keyup()})}if(A!=""){jQuery(G).val(A);jQuery(document).ready(function(){jQuery(G).keyup()})}}function r(M,D,H,A,N,J,C,K){if(D==null){D=z(M.fnSettings(),H,true,false,true)}var I=H;var G=M.fnSettings().aoPreSearchCols[w].sSearch;if(G==null||G==""){G=C}if(K!=""){if(jQuery.isArray(K)){K=K[0]}}var i='<select class="search_init select_filter"><option value="" class="search_init">'+N+"</option>";var F=0;var B=D.length;for(F=0;F<B;F++){if(typeof(D[F])!="object"){var E="";if(escape(D[F])==G||escape(D[F])==escape(G)){E="selected "}if((K!="")&&(escape(D[F])==escape(K))){E='selected= "selected" '}i+="<option "+E+' value="'+escape(D[F])+'">'+D[F]+"</option>"}else{var E="";if(J){if(D[F].value==G){E='selected= "selected" '}if((K!="")&&(D[F].value==K)){E='selected= "selected" '}i+="<option "+E+'value="'+D[F].value+'">'+D[F].label+"</option>"}else{if(escape(D[F].value)==G){E="selected "}if((K!="")&&(D[F].value==K)){E='selected= "selected" '}i+="<option "+E+'value="'+escape(D[F].value)+'">'+D[F].label+"</option>"}}}var L=a(i+"</select>");A.html(L);A.wrapInner('<span class="filter_column filter_select" />');L.selecter();L.change(function(){if(a(this).val()!=""){a(this).removeClass("search_init")}else{a(this).addClass("search_init")}if(J){M.fnFilter(a(this).val(),H,J)}else{M.fnFilter(unescape(a(this).val()),H)}v()});L.css("display","none !important");if(G!=null&&G!=""){M.fnFilter(unescape(G),H)}if(K!=""){L.change()}}function e(A,B,C,E,i){var D=A.fnSettings();if(B==null&&D.sAjaxSource!=""&&!D.oFeatures.bServerSide){D.aoDrawCallback.push({fn:(function(F,H,G){return function(){if(D.iDraw==2&&D.sAjaxSource!=null&&D.sAjaxSource!=""&&!D.oFeatures.bServerSide){return r(A,null,u(F),H,G,C,E)}}})(w,h,m),sName:"column_filter_"+w})}r(A,B,u(w),h,m,C,E,i)}function s(S,i,B,R){if(!jQuery.isArray(R)){R=[R]}if(i==null){i=z(S.fnSettings(),w,true,true,true)}var H=w;var N="",U,T=i.length;var Q=true;if(typeof B!=="undefined"){if(a(B).is("td")||a(B).is("th")){Q=true}else{Q=false}}var C=m.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_").replace(" ","_");C=C.replace(/[^a-zA-Z 0-9]+/g,"");var D=wdtRandString();var O=m;if(l.sFilterButtonText!=null||l.sFilterButtonText!=undefined){O=l.sFilterButtonText}var V=10;var M=12;var L=Math.floor(T/M);if(T%M>0){L=L+1}var A=100/L-2;var J=V*L;if(L==1){A=20}var W='<div style="float:left; min-width: '+A+'%; " >';var X="</div>";if(Q){var K=S.attr("id")+C;var G="chkBtnOpen"+K;var E=K+"-flt-toggle";N+='<button id="'+G+'" class="checkbox_filter btn" > '+O+"</button>";N+='<div id="'+E+'" title="'+m+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+(J)+'%; " >';N+=W}N+="<fieldset>";for(U=0;U<T;U++){var C=wdtRandString();if(U%M==0&&U!=0){}var I="";if(jQuery.inArray(i[U],R)!=-1){I='checked="checked" '}N+='<label for="'+C+'"><span><input class="search_init checkbox_filter wdtFilterCheckbox" type="checkbox" id= "'+C+'" name= "'+D+'" value="'+i[U]+'" '+I+" /> "+i[U]+"</span></label><br/>";a(document).on("change","#"+C,function(){var Z="";var ab="|";var Y=a('input:checkbox[name="'+D+'"]:checked').size();a('input:checkbox[name="'+D+'"]:checked').each(function(ac){if((ac==0&&Y==1)||(ac!=0&&ac==Y-1)){ab=""}Z=Z.replace(/^\s+|\s+$/g,"");Z=Z+a(this).val()+ab;ab="|"});for(var aa=0;aa<T;aa++){if(Z!=""){a("#"+C).removeClass("search_init")}else{a("#"+C).addClass("search_init")}}S.fnFilter(Z,H,true,false);v()})}N+="</fieldset>";h.html(N);h.wrapInner('<span class="filter_column filter_checkbox" />');a("input.wdtFilterCheckbox").picker();a(document).ready(function(){for(var Y in R){a('input.wdtFilterCheckbox[value="'+R[Y]+'"]').change()}});if(Q){var F=wdtDialog("",O);F.addClass("wdtFilterDialog");a("#"+E).appendTo(F).wrap('<div class="wdtCheckboxModalWrap" />');F.append('<button class="btn" id="wdt_checkbox_reset_'+F.attr("id")+'" href="#">Reset</button>');F.append('<button class="btn" id="wdt_checkbox_close_'+F.attr("id")+'" href="#">OK</button>');jQuery("#wdt_checkbox_close_"+F.attr("id")).click(function(Y){Y.preventDefault();jQuery.remodal.lookup[F.data("remodal")].close()});jQuery("#wdt_checkbox_reset_"+F.attr("id")).click(function(Y){Y.preventDefault();a('input:checkbox[name="'+D+'"]:checked').each(function(Z){a(this).attr("checked",false).change();a(this).addClass("search_init")});S.fnFilter("",H,true,false);v()});a("#"+G).click(function(Z){Z.preventDefault();jQuery.remodal.lookup[F.data("remodal")].open();var Y=a(this)})}var P=v;v=function(){var Y=a("#"+G);P()}}function p(i){switch(i){case 0:return y.substring(0,y.indexOf("{from}"));case 1:return y.substring(y.indexOf("{from}")+6,y.indexOf("{to}"));default:return y.substring(y.indexOf("{to}")+4)}}var t=this;var n={sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"};var l=a.extend(n,d);return this.each(function(){if(!t.fnSettings().oFeatures.bFilter){return}b=new Array();var D=t.fnSettings().aoFooter[0];var E=t.fnSettings().nTFoot;var B="tr";if(l.sPlaceHolder=="head:after"){var C=a("tr:first",t.fnSettings().nTHead).detach();if(t.fnSettings().bSortCellsTop){C.prependTo(a(t.fnSettings().nTHead));D=t.fnSettings().aoHeader[1]}else{C.appendTo(a(t.fnSettings().nTHead));D=t.fnSettings().aoHeader[0]}B="tr:last";E=t.fnSettings().nTHead}else{if(l.sPlaceHolder=="head:before"){if(t.fnSettings().bSortCellsTop){var C=a("tr:first",t.fnSettings().nTHead).detach();C.appendTo(a(t.fnSettings().nTHead));D=t.fnSettings().aoHeader[1]}else{D=t.fnSettings().aoHeader[0]}B="tr:first";E=t.fnSettings().nTHead}}a(D).each(function(F){w=F;var G={type:"text",bRegex:false,bSmart:true,iMaxLenght:-1,iFilterLength:0};if(l.aoColumns!=null){if(l.aoColumns.length<w||l.aoColumns[w]==null){return}G=l.aoColumns[w]}m=a(a(this)[0].cell).text();if(G.sSelector==null){h=a(a(this)[0].cell)}else{h=a(G.sSelector);if(h.length==0){h=a(a(this)[0].cell)}}if(G!=null){if(G.sRangeFormat!=null){y=G.sRangeFormat}else{y=l.sRangeFormat}switch(G.type){case"null":break;case"number":o(t,true,false,true,G.iFilterLength,G.iMaxLenght,G.defaultValue);break;case"select":if(G.bRegex!=true){G.bRegex=false}e(t,G.values,G.bRegex,G.selected,G.defaultValue);break;case"number-range":f(t,G.defaultValue);break;case"date-range":q(t,G.defaultValue);break;case"checkbox":s(t,G.values,G.sSelector,G.defaultValue);break;case"text":default:bRegex=(G.bRegex==null?false:G.bRegex);bSmart=(G.bSmart==null?false:G.bSmart);o(t,bRegex,bSmart,false,G.iFilterLength,G.iMaxLenght,G.defaultValue);break}}});for(j=0;j<g.length;j++){var A=function(){var F=t.attr("id");if((typeof a("#"+F+"_range_from_"+g[j]).val()==="undefined")||(typeof a("#"+F+"_range_to_"+g[j]).val()==="undefined")){return l.sRangeSeparator}return a("#"+F+"_range_from_"+g[j]).val()+l.sRangeSeparator+a("#"+F+"_range_to_"+g[j]).val()};c.push(A)}if(t.fnSettings().oFeatures.bServerSide){var i=t.fnSettings().fnServerData;t.fnSettings().fnServerData=function(F,H,J){for(j=0;j<g.length;j++){var G=g[j];for(k=0;k<H.length;k++){if(H[k].name=="sSearch_"+G){H[k].value=c[j]()}}}H.push({name:"sRangeSeparator",value:l.sRangeSeparator});if(i!=null){try{i(F,H,J,t.fnSettings())}catch(I){i(F,H,J)}}else{a.getJSON(F,H,function(K){J(K)})}}}})}})(jQuery);